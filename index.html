<!DOCTYPE html>
<html>
    <head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GPA Calculator</title>
        <style>
            /* === COLOR CUSTOMIZATION POINTS === */
            /* Change background color of the entire page here */
            /* body { background-color: #f0f0f0; } */

            /* Change the title color */
            /* h1 { color: #003366; } */

            /* Change the box background and border color for each year */
            /* .year-box {
  border: 1px solid #ccc;
  padding: 15px;
  flex: 1 1 45%;
  max-width: 45%;
  background: #f9f9f9;
  box-sizing: border-box;
} */

            /* Change table header background */
            /* th { background-color: #e0e0ff; } */

            /* Change button appearance */
            /* button {
  padding: 6px 10px;
  font-size: 13px;
  margin-top: 8px;
  display: inline-block;
  width: fit-content;
  max-width: 140px;
  box-sizing: border-box;
  white-space: nowrap;
} */

            /* Change result box appearance */
            /* #result { color: #2a7b2a; } */

            /* Change summary background */
            /* #summary { background-color: #e6f7ff; border-color: #91d5ff; } */
            body {
                font-family: Arial, sans-serif;
                margin: 40px;
            }
            h1, h2 {
                margin-top: 20px;
            }
            .container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
}
          
            table {
    width: 100%;
    margin-bottom: 10px;
    border-collapse: collapse;
    table-layout: auto;
    box-sizing: border-box;
  }
            th, td {
                border: 1px solid #ccc;
                font-size: 13px;
                text-align: left;
                vertical-align: middle;
                padding: 1px 4px;
                height: 30px;
            }
            input[type="text"] {
  width: 100%;
  max-width: 250px;
  height: auto;
  box-sizing: border-box;
}
            input.credits {
  width: 100%;
  max-width: 80px;
  height: auto;
  box-sizing: border-box;
  -moz-appearance: textfield;
}
            input, select {
  font-size: 13px;
  padding: 1px 3px;
  height: 26px;
  width: 100%;
  max-width: 300px;
  box-sizing: border-box;
}
            button {
                padding: 6px 12px;
                font-size: 13px;
                margin-top: 8px;
                display: inline-block;
            }
            #result {
                font-weight: bold;
                font-size: 16px;
                margin-top: 10px;
            }
            #summary {
                margin-top: 20px;
                padding: 10px;
                background-color: #eef;
                border: 1px solid #99c;
            }
        @media (max-width: 600px) {
  .container {
    flex-direction: column;
  }

  table {
    width: 100%;
    margin-bottom: 10px;
    border-collapse: collapse;
    table-layout: auto;
    box-sizing: border-box;
  }

  input, select {
    width: 100%;
    box-sizing: border-box;
  }

  button {
    width: auto;
    max-width: 140px;
  }
}

  table {
    width: 100%;
    margin-bottom: 10px;
    border-collapse: collapse;
    table-layout: auto;
    box-sizing: border-box;
  }

  input, select {
    width: 100%;
    box-sizing: border-box;
  }

  button {
    width: 100%;
    max-width: 100%;
  }
}



  table {
    width: 100%;
    margin-bottom: 10px;
    border-collapse: collapse;
    table-layout: auto;
    box-sizing: border-box;
  }

  input, select {
  font-size: 13px;
  padding: 1px 3px;
  height: 26px;
  width: 100%;
  max-width: 300px;
  box-sizing: border-box;
}
}



  table {
    width: 100%;
    margin-bottom: 10px;
    border-collapse: collapse;
    table-layout: auto;
    box-sizing: border-box;
  }

  input[type="text"], input[type="number"], select, button {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  border: 1px solid #ccc;
  background-color: white;
  border-radius: 4px;
  font-family: inherit;
  font-size: 13px;
  padding: 4px 6px;
  color: #333;
  box-sizing: border-box;
}
}
.year-box {
  width: 100%;
  max-width: 420px;
  margin: 10px;
  box-sizing: border-box;
  padding: 10px;
}

.details {
  cursor: pointer;
  background-color: #f0f0f0;
  padding: 10px;
  border-radius: 5px;
}

@media (min-width: 700px) {
  .year-box {
    flex: 0 1 calc(50% - 40px);
  }
}

input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input, select, button {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  border: 1px solid #ccc;
  background-color: white;
  border-radius: 4px;
  font-family: inherit;
  font-size: 13px;
  padding: 4px 6px;
  color: #333;
  box-sizing: border-box;
}

select {
  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='10'%20height='5'%20viewBox='0%200%2010%205'%3E%3Cpath%20fill='%23666'%20d='M0%200l5%205%205-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 10px 5px;
  padding-right: 20px;
}

input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 18px;
  height: 18px;
  border: 2px solid #333;
  border-radius: 50%;
  display: inline-block;
  position: relative;
  cursor: pointer;
  background-color: transparent;
  vertical-align: middle;
}

input[type="checkbox"]:checked {
  background-color: #333;
  border-color: #333;
}

button {
  padding: 6px 12px;
  font-size: 13px;
  background-color: white;
  color: #333;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
  box-sizing: border-box;
  height: 30px;
  transition: background-color 0.2s;
}

button:hover {
  background-color: #f0f0f0;
}

select {
  height: 30px;
  background-color: white;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 24px 4px 6px;
  background-image: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23666'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3E%3Cpolyline%20points='6%209%2012%2015%2018%209'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 12px;
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
}

input[type="text"], input[type="number"] {
  height: 30px;
  padding: 4px 6px;
  border-radius: 4px;
  border: 1px solid #ccc;
  box-sizing: border-box;
  font-family: inherit;
  font-size: 13px;
}

button[onclick*="remove"] {
  background: none;
  border: none;
  font-weight: bold;
  color: #333;
  font-size: 14px;
  padding: 0 6px;
  height: auto;
  transition: color 0.2s;
}

button[onclick*="remove"]:hover {
  color: red;
  cursor: pointer;
}



</style>
    </head>
    <body style="max-width: 900px; margin: auto; padding: 40px;">
        <h1>Jo Yoo's GPA Calculator</h1>
        <p>
            Welcome to Joseph Yoo's GPA Calculator for Glen Rock High School.
            To begin, enter your final letter grade, the number of credits earned per course, and the course level.
            At Glen Rock High School, full-year classes are typically worth 5 credits, while semester-long courses are worth 2.5.
            Science courses (non-AP) carry 6 credits due to the inclusion of a lab component, and AP science courses are valued at 7 credits.
            Gym and Health do not count towards GPA.
        </p>

        <div style="display: flex; gap: 6px; align-items: flex-start; justify-content: flex-start; margin-bottom: 10px; flex-wrap: nowrap;">
            <button onclick="exportData()">Export Data</button>
            <button onclick="document.getElementById('fileInput').click()">Import Data</button>
            <input type="file" id="fileInput" style="display: none;" onchange="importData()" />
        </div>

        <div class="container" id="year-sections"></div>

        <button id="calculate">Calculate GPA</button>
        <p id="result">Your GPA will appear here.</p>

        <div id="summary"></div>

        <!-- Final Grade Calculator Section -->
        <div id="final-grade-calc" style="margin-top: 40px;">
  <h2>Final Grade Calculator</h2>
  <div style="display: flex; gap: 20px; flex-wrap: wrap; align-items: flex-start;">
  <label style="display: inline-flex; flex-direction: column; align-items: flex-start; gap: 2px;">
    <div style="display: flex; align-items: center; gap: 6px;">
      <input type="checkbox" id="isAP">
      <strong>AP</strong>
    </div>
    <small>(mark if your class is an AP class)</small>
  </label>
  <label style="display: inline-flex; flex-direction: column; align-items: flex-start; gap: 2px;">
    <div style="display: flex; align-items: center; gap: 6px;">
      <input type="checkbox" id="isSemester">
      <strong>Semester</strong>
    </div>
    <small>(mark if your class is a semester class)</small>
  </label>
</div>
<div id="grade-inputs" style="margin-top: 10px;"></div>
            <button onclick="calculateFinalGrade()">Calculate Final Grade</button>
            <p id="final-grade-result"></p>
        </div>

        <section id="gpa-explainer">
  <h2>How GPA is Calculated</h2>

  <h3>GRADING SYSTEM</h3>
  <p>The Glen Rock grading system consists of thirteen letter grades: <strong>A+, A, A‑, B+, B, B‑, C+, C, C‑, D+, D, D‑, F</strong>.</p>

  <table class="grade-scale" style="width: auto; font-size: 13px; border-collapse: collapse; border: none; margin-left: 12px;">
  <tr><th style="border: none; padding: 4px 8px;">Letter</th><th style="border: none; padding: 4px 8px;">% Range</th><th style="border: none; padding: 4px 8px;">GPA</th></tr>
  <tr><td style="border: none; padding: 2px 8px;">A+</td><td style="border: none;">97+</td><td style="border: none;">4.3</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">A</td><td style="border: none;">93–96</td><td style="border: none;">4.0</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">A‑</td><td style="border: none;">90–92</td><td style="border: none;">3.7</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">B+</td><td style="border: none;">87–89</td><td style="border: none;">3.3</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">B</td><td style="border: none;">83–86</td><td style="border: none;">3.0</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">B‑</td><td style="border: none;">80–82</td><td style="border: none;">2.7</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">C+</td><td style="border: none;">77–79</td><td style="border: none;">2.3</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">C</td><td style="border: none;">73–76</td><td style="border: none;">2.0</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">C‑</td><td style="border: none;">70–72</td><td style="border: none;">1.7</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">D+</td><td style="border: none;">67–69</td><td style="border: none;">1.3</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">D</td><td style="border: none;">63–66</td><td style="border: none;">1.0</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">D‑</td><td style="border: none;">60–62</td><td style="border: none;">0.7</td></tr>
  <tr><td style="border: none; padding: 2px 8px;">F</td><td style="border: none;">≤59</td><td style="border: none;">0.0</td></tr>
</table>

  <p>Courses designated as <strong>Honors</strong> receive an additional 0.3 weight. <strong>AP (Advanced Placement)</strong> courses receive an additional 0.5 weight. College Prep and "Advanced" courses receive no extra weight. Physical Education and Health are not included in GPA calculations.</p>

  <h3>Step-by-Step GPA Calculation</h3>

  <ol>
    <li><strong>Convert Letter Grade to GPA:</strong> Use the table above.</li>
    <li><strong>Add Course Weight:</strong>
      <ul>
        <li>AP = +0.50</li>
        <li>Honors = +0.30</li>
        <li>CP/CP = 0</li>
      </ul>
    </li>
    <li><strong>Multiply by Credits:</strong> 
      <br>Grade Points = (Base GPA + Weight) × Credits
    </li>
    <li><strong>Add Up All Grade Points and Credits for the Year.</strong></li>
    <li><strong>Calculate GPA:</strong> 
      <br>Year GPA = Total Grade Points ÷ Total Credits
    </li>
    <li><strong>Cumulative GPA:</strong> 
      <br>Add all year totals and divide: 
      <br><code>Cumulative GPA = Σ Grade Points ÷ Σ Credits</code>
    </li>
  </ol>

  <h3>Example</h3>
  <table class="example">
    <tr><th>Course</th><th>Level</th><th>Credits</th><th>Letter</th><th>Calc</th><th>Grade Pts</th></tr>
    <tr><td>AP Chemistry</td><td>AP</td><td>7</td><td>A‑</td><td>(3.7 + 0.5) × 7</td><td>29.4</td></tr>
    <tr><td>Honors English</td><td>Honors</td><td>5</td><td>B+</td><td>(3.3 + 0.3) × 5</td><td>18.0</td></tr>
    <tr><td>World History</td><td>CP</td><td>5</td><td>A</td><td>(4.0 + 0.0) × 5</td><td>20.0</td></tr>
    <tr class="tot"><td>Total</td><td>—</td><td>17</td><td>—</td><td>—</td><td>67.4</td></tr>
    <tr class="gpa"><td colspan="6">Year GPA = 67.4 ÷ 17 = 3.96</td></tr>
  </table>
<h2 style="margin-top: 40px;">How Final Grades Are Calculated</h2>

<p>At Glen Rock High School, your final course grade is calculated based on a weighted average of your marking period grades and final exam score. The weights vary depending on course type (AP, CP, or semester).</p>

<h3>Full-Year CP and Honors Courses</h3>
<ul>
  <li>Each Marking Period (MP1–MP4): 22.5%</li>
  <li>Final Exam: 10%</li>
</ul>
<p><em>Final Grade = MP1 × 22.5% + MP2 × 22.5% + MP3 × 22.5% + MP4 × 22.5% + Final × 10%</em></p>

<h3>Full-Year AP Courses</h3>
<ul>
  <li>Each Marking Period (MP1–MP4): 25%</li>
  <li>No final exam grade is included.</li>
</ul>
<p><em>Final Grade = MP1 × 25% + MP2 × 25% + MP3 × 25% + MP4 × 25%</em></p>

<h3>Semester Courses (CP/Honors/AP)</h3>
<ul>
  <li>Each Half: 45%</li>
  <li>Final Exam: 10% (CP/Honors only)</li>
</ul>
<p><em>Final Grade = Half 1 × 45% + Half 2 × 45% + Final × 10%</em></p>
<p><em>AP semester courses do not have a final exam. For those courses: Final Grade = Half 1 × 50% + Half 2 × 50%</em></p>

<h3>Understanding Final Letter Assignment</h3>
<p>After calculating the weighted average of your grades, the final result is matched to the closest letter grade using Glen Rock’s official scale. Though the school does not publish exact rounding cutoffs, the final letter grade is typically based on the GPA number that best represents the average performance.</p>

<p>In practice, your GPA result is interpreted using the table below, and rounded to the nearest matching grade. Here are some illustrative examples:</p>

<ul>
  <li><strong>A, A, A+, A+</strong> → <strong>Final Grade: A+</strong></li>
  <li><strong>A−, A+, A+, A+</strong> → <strong>Final Grade: A+</strong></li>
  <li><strong>B+, A+, A+ (with final exam)</strong> → <strong>Final Grade: A</strong></li>
</ul>

<p>This process is built into the calculator above. You may try entering your own grades and weights to see how it rounds!</p>
</section>
<!-- existing content above -->
        <script>
            const gradeToGPA = {
                "A+": 4.3, "A": 4.0, "A-": 3.7,
                "B+": 3.3, "B": 3.0, "B-": 2.7,
                "C+": 2.3, "C": 2.0, "C-": 1.7,
                "D+": 1.3, "D": 1.0, "D-": 0.7,
                "F": 0.0
            };
            const years = ["freshman", "sophomore", "junior", "senior"];

            function createYearSection(year) {
                const container = document.getElementById("year-sections");
                const div = document.createElement("div");
                div.className = "year-box";
                div.innerHTML = `
                    <h2>${year.charAt(0).toUpperCase() + year.slice(1)}</h2>
                    <table id="${year}" class="year-table">
                        <tr>
                            <th>Course (optional)</th>
                            <th>Grade</th>
                            <th>Credits</th>
                            <th>Type</th>
                            <th style="width: 30px;"></th>
                        </tr>
                    </table>
                    <button onclick="addClassRow('${year}')">+ Add Class</button>
                `;
                container.appendChild(div);
                addClassRow(year);
            }

            function addClassRow(year) {
                const table = document.getElementById(year);
                const row = document.createElement("tr");
                row.innerHTML = createRowHTML();
                table.appendChild(row);
            }

            function createRowHTML(course = "", grade = "", credits = "", type = "cp") {
                return `
                    <tr>
                        <td><input type="text" value="${course}" /></td>
                        <td>
                            <select class="grade">
                                ${["", "A+", "A", "A-", "B+", "B", "B-", "C+", "C", "C-", "D+", "D", "D-", "F"].map(opt =>
                                    `<option value="${opt}" ${opt === grade ? "selected" : ""}>${opt}</option>`).join("")}
                            </select>
                        </td>
                        <td><input type="number" class="credits" value="${credits}" min="0" step="0.5" /></td>
                        <td>
                            <select class="type">
                                ${["cp", "honors", "ap"].map(opt =>
                                    `<option value="${opt}" ${opt === type ? "selected" : ""}>${opt}</option>`).join("")}
                            </select>
                        </td>
                        <td><button onclick="this.closest('tr').remove()" style="padding:2px 6px; font-size:12px;">✕</button></td>
                    </tr>
                `;
            }

            document.getElementById("calculate").addEventListener("click", function () {
                let totalPoints = 0;
                let totalCredits = 0;
                const summaryLines = [];

                years.forEach(year => {
                    let yearPoints = 0;
                    let yearCredits = 0;
                    const table = document.getElementById(year);
                    const rows = table.querySelectorAll("tr");
                    for (let i = 1; i < rows.length; i++) {
                        const row = rows[i];
                        const grade = row.querySelector(".grade")?.value;
                        const credit = parseFloat(row.querySelector(".credits")?.value);
                        const type = row.querySelector(".type")?.value;

                        if (grade && !isNaN(credit)) {
                            let gpa = gradeToGPA[grade];
                            if (type === "honors") gpa += 0.3;
                            if (type === "ap") gpa += 0.5;
                            yearPoints += gpa * credit;
                            yearCredits += credit;
                        }
                    }

                    if (yearCredits > 0) {
                        const yearGPA = (yearPoints / yearCredits).toFixed(4);
                        summaryLines.push(`<strong>${year.charAt(0).toUpperCase() + year.slice(1)}:</strong> GPA = ${yearGPA}, Credits = ${yearCredits}`);
                        totalPoints += yearPoints;
                        totalCredits += yearCredits;
                    }
                });

                const finalGPA = totalCredits > 0 ? (totalPoints / totalCredits).toFixed(4) : "N/A";
                document.getElementById("result").textContent = `Your Weighted GPA is: ${finalGPA}`;
                document.getElementById("summary").innerHTML = summaryLines.join("<br>");
            });

            function exportData() {
                const lines = [];
                years.forEach(year => {
                    const table = document.getElementById(year);
                    const rows = table.querySelectorAll("tr");
                    for (let i = 1; i < rows.length; i++) {
                        const row = rows[i];
                        const course = row.querySelector("input[type='text']")?.value || "";
                        const grade = row.querySelector(".grade")?.value || "";
                        const credits = row.querySelector(".credits")?.value || "";
                        const type = row.querySelector(".type")?.value || "";
                        lines.push(`${year}|${course}|${grade}|${credits}|${type}`);
                    }
                });

                const blob = new Blob([lines.join("\n")], { type: "text/plain" });
                const link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = "gpa_data.txt";
                link.click();
            }

            function importData() {
                const fileInput = document.getElementById("fileInput");
                const file = fileInput.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = function (e) {
                    const lines = e.target.result.split("\n");
                    years.forEach(year => {
                        const table = document.getElementById(year);
                        while (table.rows.length > 1) {
                            table.deleteRow(1);
                        }
                    });
                    lines.forEach(line => {
                        const [year, course, grade, credits, type] = line.trim().split("|");
                        if (!years.includes(year)) return;
                        const table = document.getElementById(year);
                        const row = document.createElement("tr");
                        row.innerHTML = createRowHTML(course, grade, credits, type);
                        table.appendChild(row);
                    });
                };
                reader.readAsText(file);
            }

            years.forEach(createYearSection);

            function calculateFinalGrade() {
                const isAP = document.getElementById("isAP").checked;
                const isSemester = document.getElementById("isSemester").checked;

                const inputs = document.querySelectorAll("#grade-inputs select");
                const weights = [];
                let grades = [];

                inputs.forEach(input => {
                    const val = input.value.trim();
                    if (val && gradeToGPA[val]) {
                        grades.push(gradeToGPA[val]);
                    } else {
                        grades.push(NaN);
                    }
                });

                if (grades.some(isNaN)) {
                    document.getElementById("final-grade-result").textContent = "Please enter valid letter grades.";
                    return;
                }

                if (isAP && isSemester) {
                    weights.push(0.5, 0.5);
                } else if (isAP && !isSemester) {
                    weights.push(0.25, 0.25, 0.25, 0.25);
                } else if (!isAP && isSemester) {
                    weights.push(0.45, 0.45, 0.10);
                } else {
                    weights.push(0.225, 0.225, 0.225, 0.225, 0.10);
                }

                const weightedSum = grades.reduce((acc, val, i) => acc + val * weights[i], 0);
                const rounded = Math.round(weightedSum * 100) / 100;

                // find closest matching GPA value
                let closest = null;
                let minDiff = Infinity;
                for (const [letter, gpa] of Object.entries(gradeToGPA)) {
                    const diff = Math.abs(gpa - rounded);
                    if (diff < minDiff || (diff === minDiff && gpa > gradeToGPA[closest])) {
                        minDiff = diff;
                        closest = letter;
                    }
                }

                document.getElementById("final-grade-result").textContent = `Final Letter Grade: ${closest}`;
            }

            document.getElementById("isAP").addEventListener("change", generateFinalGradeInputs);
            document.getElementById("isSemester").addEventListener("change", generateFinalGradeInputs);

            function generateFinalGradeInputs() {
    const container = document.getElementById("grade-inputs");
    const previousValues = Array.from(container.querySelectorAll("select")).map(select => select.value);
    container.innerHTML = "";
    const isAP = document.getElementById("isAP").checked;
    const isSemester = document.getElementById("isSemester").checked;
    let labels = [];

                if (isAP && isSemester) {
                    labels = ["Half 1", "Half 2"];
                } else if (isAP) {
                    labels = ["MP1", "MP2", "MP3", "MP4"];
                } else if (isSemester) {
                    labels = ["Half 1", "Half 2", "Final"];
                } else {
                    labels = ["MP1", "MP2", "MP3", "MP4", "Final"];
                }

                labels.forEach((label, index) => {
    const div = document.createElement("div");
    const value = previousValues[index] || "";
    div.innerHTML = `<div style="display: flex; align-items: center; min-width: 180px; gap: 5px;"><label style="white-space: nowrap; width: 80px;">${label}:</label><select style="flex: 1;">
        <option value="">--</option>
        ${["A+", "A", "A-", "B+", "B", "B-", "C+", "C", "C-", "D+", "D", "D-", "F"].map(opt => `<option value="${opt}" ${opt === value ? 'selected' : ''}>${opt}</option>`).join("")}
    </select></div>`;
    container.appendChild(div);
                });
            }

            generateFinalGradeInputs();
        </script>
    </body>
</html>
